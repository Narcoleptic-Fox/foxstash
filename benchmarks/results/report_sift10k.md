# ANN Benchmark Report

**Dataset**: sift10k
**Index Size**: 10.0K vectors
**Generated**: 2026-02-04 16:35:19

## Summary

| Library | Algorithm | Build Time | Memory | Recall@10 | Recall@100 | QPS |
|---------|-----------|------------|--------|-----------|------------|-----|
| annoy | annoy | 0.50s | 0MB | 1.0000 | 0.9999 | 598.05 |
| faiss | flat | 0.01s | 5MB | 1.0000 | 0.0000 | 5.6K |
| faiss | hnsw | 0.80s | 5MB | 1.0000 | 0.9994 | 7.0K |
| faiss | ivf | 0.29s | 5MB | 1.0000 | 1.0000 | 52.6K |
| hnswlib | hnsw | 0.35s | 5MB | 0.9999 | 0.9989 | 32.5K |

## Recall vs QPS Tradeoff

Best configurations at different recall targets:

### Recall@10 ≥ 0.95

| Library | Algorithm | Recall@10 | QPS | Parameters |
|---------|-----------|-----------|-----|------------|
| faiss | ivf | 1.0000 | 52.6K | nlist=100, nprobe=100 |
| hnswlib | hnsw | 0.9999 | 32.5K | M=32, ef_construction=200, ef=500 |
| hnswlib | hnsw | 0.9917 | 18.5K | M=32, ef_construction=200, ef=200 |
| faiss | hnsw | 0.9567 | 17.0K | M=32, efConstruction=200, efSearch=100 |
| faiss | hnsw | 0.9946 | 10.4K | M=32, efConstruction=200, efSearch=200 |

### Recall@10 ≥ 0.99

| Library | Algorithm | Recall@10 | QPS | Parameters |
|---------|-----------|-----------|-----|------------|
| faiss | ivf | 1.0000 | 52.6K | nlist=100, nprobe=100 |
| hnswlib | hnsw | 0.9999 | 32.5K | M=32, ef_construction=200, ef=500 |
| hnswlib | hnsw | 0.9917 | 18.5K | M=32, ef_construction=200, ef=200 |
| faiss | hnsw | 0.9946 | 10.4K | M=32, efConstruction=200, efSearch=200 |
| faiss | flat | 1.0000 | 7.0K | k=100 |

## Index Construction

| Library | Algorithm | Build Time | Memory | Notes |
|---------|-----------|------------|--------|-------|
| faiss | flat | 0.01s | 5MB | Brute force baseline (perfect recall) |
| faiss | hnsw | 0.80s | 5MB | - |
| faiss | ivf | 0.29s | 5MB | - |
| hnswlib | hnsw | 0.35s | 5MB | - |
| annoy | annoy | 0.63s | 0MB | - |

## Analysis

### Winners by Category

- **Best Recall@10**: faiss/flat (1.0000)
- **Best QPS**: faiss/ivf (234.0K queries/sec)
- **Fastest Build**: faiss/flat (0.01s)
- **Lowest Memory** (≥0.9 recall): annoy/annoy (0MB)
- **Best Balanced** (≥0.95 recall): faiss/ivf (R@10=1.0000, 52.6K QPS)

### Recommendations

- **For maximum accuracy**: Use brute force (FAISS flat) if dataset fits in memory
- **For balanced performance**: HNSW variants (hnswlib or FAISS HNSW) with ef_search=100-200
- **For maximum throughput**: IVF with lower nprobe, or Annoy with more trees
- **For memory-constrained environments**: Consider Annoy or quantized FAISS indices

## Detailed Results

### annoy

#### annoy

| Parameters | Recall@10 | Recall@100 | QPS |
|------------|-----------|------------|-----|
| n_trees=10, search_k=-1 | 0.2852 | 0.2366 | 17.1K |
| n_trees=10, search_k=1000 | 0.2852 | 0.2366 | 16.6K |
| n_trees=10, search_k=5000 | 0.7335 | 0.6688 | 5.0K |
| n_trees=50, search_k=5000 | 0.8079 | 0.7293 | 4.5K |
| n_trees=50, search_k=-1 | 0.8079 | 0.7293 | 4.4K |
| n_trees=10, search_k=10000 | 0.9083 | 0.8716 | 2.7K |
| n_trees=100, search_k=10000 | 0.9609 | 0.9213 | 2.3K |
| n_trees=100, search_k=-1 | 0.9609 | 0.9213 | 2.3K |
| n_trees=50, search_k=25000 | 0.9975 | 0.9949 | 1.1K |
| n_trees=50, search_k=50000 | 1.0000 | 0.9999 | 598.05 |
| n_trees=100, search_k=50000 | 1.0000 | 1.0000 | 519.12 |
| n_trees=100, search_k=100000 | 1.0000 | 1.0000 | 306.40 |


### faiss

#### flat

| Parameters | Recall@10 | Recall@100 | QPS |
|------------|-----------|------------|-----|
| k=100 | 1.0000 | 1.0000 | 7.0K |
| k=10 | 1.0000 | 0.0000 | 5.6K |

#### hnsw

| Parameters | Recall@10 | Recall@100 | QPS |
|------------|-----------|------------|-----|
| M=32, efConstruction=200, efSearch=10 | 0.4387 | 0.3315 | 23.3K |
| M=32, efConstruction=200, efSearch=50 | 0.8430 | 0.7406 | 21.8K |
| M=32, efConstruction=200, efSearch=100 | 0.9567 | 0.9050 | 17.0K |
| M=32, efConstruction=200, efSearch=200 | 0.9946 | 0.9813 | 10.4K |
| M=32, efConstruction=200, efSearch=500 | 1.0000 | 0.9994 | 7.0K |

#### ivf

| Parameters | Recall@10 | Recall@100 | QPS |
|------------|-----------|------------|-----|
| nlist=100, nprobe=10 | 0.3478 | 0.2811 | 234.0K |
| nlist=100, nprobe=1 | 0.0592 | 0.0428 | 77.1K |
| nlist=100, nprobe=100 | 1.0000 | 1.0000 | 52.6K |
| nlist=100, nprobe=50 | 0.8398 | 0.7947 | 29.9K |


### hnswlib

#### hnsw

| Parameters | Recall@10 | Recall@100 | QPS |
|------------|-----------|------------|-----|
| M=32, ef_construction=200, ef=10 | 0.9426 | 0.8828 | 95.2K |
| M=32, ef_construction=200, ef=500 | 0.9999 | 0.9989 | 32.5K |
| M=32, ef_construction=200, ef=50 | 0.9426 | 0.8828 | 27.9K |
| M=32, ef_construction=200, ef=100 | 0.9426 | 0.8828 | 26.7K |
| M=32, ef_construction=200, ef=200 | 0.9917 | 0.9738 | 18.5K |


---

*Report generated by Foxstash benchmark suite*